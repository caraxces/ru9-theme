/* ========================================
   MOBILE PRODUCT LAYOUT - OPTIMIZED
   Performance-optimized mobile product image layout
   ======================================== */

/* Performance: Use contain for layout isolation */
@media screen and (max-width: 768px) {

  /* Main container - Single definition, merged */
  .product__main-photos {
    height: 390px !important;
    width: calc(100% + 32px) !important;
    margin: 0 -16px !important;
    position: relative !important;
    overflow: hidden !important;
    display: block !important;
    flex: none !important;
    background-color: #f8f8f8 !important;
    /* Performance: contain layout and style */
    contain: layout style;
  }

  .product__photos img {
    border-radius: 0 !important;
  }

  /* All image containers - Merged selectors for better performance */
  .product__main-photos .image-wrap,
  .product__main-photos .image-wrap.loaded,
  .product__main-photos .product-slideshow .image-wrap,
  .product__main-photos .product-slideshow .image-wrap.loaded,
  .product__main-photos [data-product-photos] .image-wrap,
  .product__main-photos .product-main-slide .image-wrap,
  .product__main-photos .product-slideshow,
  .product__main-photos [data-product-photos],
  .product__main-photos .product-main-slide {
    height: 390px !important;
    min-height: 390px !important;
    max-height: 390px !important;
    width: 100% !important;
    padding-bottom: 0 !important;
    display: block !important;
  }

  /* Absolute positioned containers */
  .product__main-photos .image-wrap,
  .product__main-photos .image-wrap.loaded,
  .product__main-photos .product-slideshow .image-wrap,
  .product__main-photos .product-slideshow .image-wrap.loaded,
  .product__main-photos [data-product-photos] .image-wrap,
  .product__main-photos .product-main-slide .image-wrap {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
  }

  /* Slider containers - relative positioning */
  .product__main-photos .product-main-slide,
  .product__main-photos .product-slideshow,
  .product__main-photos [data-product-photos] {
    position: relative !important;
    overflow: visible !important;
  }

  /* Product slide - absolute overlay for transitions */
  .product__main-photos .product-main-slide {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    opacity: 0 !important;
    transition: opacity 0.3s ease !important;
    /* Performance: use transform for better GPU acceleration */
    will-change: opacity;
  }

  .product__main-photos .product-main-slide.is-selected {
    opacity: 1 !important;
  }

  /* All images - Merged for performance */
  .product__main-photos img,
  .product__main-photos .media--image,
  .product__main-photos .image-wrap img,
  .product__main-photos .image-wrap .media--image,
  .product__main-photos .product-slideshow img,
  .product__main-photos .product-slideshow .media--image,
  .product__main-photos [data-product-photos] img,
  .product__main-photos [data-product-photos] .media--image,
  .product__main-photos .product-main-slide img,
  .product__main-photos .product-main-slide .media--image {
    width: 100% !important;
    height: 390px !important;
    object-fit: cover !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    display: block !important;
    /* Performance: hardware acceleration */
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* Images in image-wrap - fade in on load */
  .product__main-photos .image-wrap img,
  .product__main-photos .image-wrap .media--image {
    visibility: visible !important;
    opacity: 0 !important;
    transition: opacity 0.3s ease !important;
  }

  .product__main-photos .image-wrap.loaded img,
  .product__main-photos .image-wrap.loaded .media--image,
  .product__main-photos .product-main-slide.is-selected img,
  .product__main-photos .product-main-slide.is-selected .media--image {
    opacity: 1 !important;
  }

  /* Images in slider - visible by default */
  .product__main-photos .product-main-slide img,
  .product__main-photos .product-main-slide .media--image,
  .product__main-photos .product-slideshow img,
  .product__main-photos .product-slideshow .media--image,
  .product__main-photos [data-product-photos] img,
  .product__main-photos [data-product-photos] .media--image {
    visibility: visible !important;
    opacity: 1 !important;
  }

  /* Override inline styles with attribute selector - High specificity */
  .product__main-photos .image-wrap[style*="height: 0"],
  .product__main-photos .image-wrap[style*="padding-bottom"],
  .product__main-photos .product-slideshow .image-wrap[style*="height: 0"],
  .product__main-photos [data-product-photos] .image-wrap[style*="height: 0"],
  .product__main-photos div[class*="image-wrap"][style*="height: 0"],
  .product__main-photos div[class*="image-wrap"][style*="padding-bottom"] {
    height: 390px !important;
    padding-bottom: 0 !important;
  }

  /* Override all divs with class containing image-wrap or slideshow */
  .product__main-photos div[class*="image-wrap"],
  .product__main-photos div[class*="slideshow"],
  .product__main-photos div[class*="main-slide"] {
    height: 390px !important;
    min-height: 390px !important;
    max-height: 390px !important;
    padding-bottom: 0 !important;
    overflow: visible !important;
  }

  /* AOS animations compatibility - Disable for better performance */
  .product__main-photos[data-aos].aos-init,
  .product__main-photos[data-aos].aos-animate,
  .product__main-photos .image-wrap.aos-init,
  .product__main-photos .image-wrap.aos-animate {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }

  /* Photoswipe compatibility */
  .product__main-photos .photoswipe__image {
    position: relative !important;
    display: block !important;
    width: 100% !important;
    height: 100% !important;
  }

  /* ========================================
     THUMBNAILS - OPTIMIZED
     ======================================== */

  /* Thumbnail containers - Merged */
  .product__thumbs,
  .product__thumbs--below,
  .product__thumbs--scroller {
    width: calc(100% + 32px) !important;
    margin-right: -16px !important;
    padding: 0 !important;
  }

  .product__thumbs--below {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }

  .product__thumbs--below .product__thumbs--scroller {
    margin-left: -16px !important;
    padding: 0 16px 20px 16px !important;
  }

  /* Thumbnail scroller - Performance optimized */
  .product__thumbs--scroller {
    display: flex !important;
    gap: 8px !important;
    overflow-x: scroll !important;
    -webkit-overflow-scrolling: touch !important;
    padding: 0 16px 20px 16px !important;
    justify-content: flex-start !important;
    align-items: center !important;
    /* Performance: contain scroll */
    contain: layout style;
    /* Performance: use will-change for smooth scrolling */
    will-change: scroll-position;
  }

  /* Thumbnail items */
  .product__thumb-item {
    flex-shrink: 0 !important;
    display: block !important;
  }

  /* Thumbnail base - Single definition */
  .product__thumb {
    width: 5rem !important;
    height: 5rem !important;
    border-radius: 4px !important;
    overflow: hidden !important;
    display: block !important;
  }

  .product__thumb .image-wrap {
    width: 100% !important;
    height: 100% !important;
    position: relative !important;
  }

  .product__thumb .image-wrap img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    /* Performance: hardware acceleration */
    transform: translateZ(0);
  }

  /* Scroller thumbnails - Specific sizing */
  .product__thumbs--scroller .product__thumb,
  .product__thumbs--scroller .product__thumb-item,
  .product__thumbs--scroller .product__thumb-item.is-active .product__thumb,
  .product__thumbs--scroller .product__thumb-item:active .product__thumb {
    width: 5rem !important;
    height: 5rem !important;
    flex-shrink: 0 !important;
  }

  .product__thumbs--scroller .product__thumb .image-wrap,
  .product__thumbs--scroller .product__thumb-item.is-active .product__thumb .image-wrap,
  .product__thumbs--scroller .product__thumb-item:active .product__thumb .image-wrap {
    width: 5rem !important;
    height: 5rem !important;
  }

  .product__thumbs--scroller .product__thumb .image-wrap img,
  .product__thumbs--scroller .product__thumb-item.is-active .product__thumb .image-wrap img,
  .product__thumbs--scroller .product__thumb-item:active .product__thumb .image-wrap img {
    width: 5rem !important;
    height: 5rem !important;
  }

  /* Thumbnail alignment */
  .product__photos .product__thumbs,
  .product__photos .product__thumbs--below {
    position: relative !important;
    left: 0 !important;
    right: 0 !important;
    transform: none !important;
  }

  /* Custom scrollbar - Performance optimized */
  .product__thumbs--scroller::-webkit-scrollbar {
    height: 4px !important;
    display: block !important;
  }

  .product__thumbs--scroller::-webkit-scrollbar-track {
    background: #F0F1EF !important;
    border-radius: 2px !important;
  }

  .product__thumbs--scroller::-webkit-scrollbar-thumb {
    background: #234085 !important;
    border-radius: 2px !important;
    transition: background 0.2s ease !important;
  }

  .product__thumbs--scroller::-webkit-scrollbar-thumb:hover {
    background: #1a2f6b !important;
  }
}

}