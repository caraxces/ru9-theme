/* 
  V12: JS-Powered Layout
  - This version is designed to work with `judge-me-layout.js`.
  - The JS file restructures the DOM, creating a `.jdgm-custom-left-column` 
    and a `.jdgm-widget-actions-wrapper` ready for a carousel.
  - This CSS is now much simpler, styling the predictable structure created by the JS.
*/

/* ==========================================================================
   #RESET & WIDGET CONTAINER
   ========================================================================== */
.jdgm-widget:not(.jdgm-medals-wrapper) .jdgm-medals-wrapper{
    display: none !important;
}
.jdgm-rev-widg {
    max-width: 100% !important;
    margin: 0 auto !important; /* Center the widget block */
    box-sizing: border-box !important;
    /* Mobile-first padding, based on featured-collections */
    padding: 0 20px !important;
    text-align: left !important;
    font-family: 'Be Vietnam Pro', sans-serif !important;
}

/* Desktop padding, based on featured-collections */
@media (min-width: 769px) {
    .jdgm-rev-widg {
        padding: 0 !important;
    }
}

/* ==========================================================================
   #OVERRIDE SHOPIFY BLOCK & JUDGE.ME CONTAINER CONSTRAINTS
   ========================================================================== */

/* Remove padding from Shopify app block */
.jdgm-sort-dropdown-wrapper .jdgm-sort-dropdown, .jdgm-sort-dropdown-wrapper .jdgm-sort-dropdown-arrow{
    color:#1C2C58 !important;
}
.shopify-app-block,
[class*="shopify-block"],
[class*="judge_me"],
[class*="judgeme"] {
    padding-left: 0 !important;
    padding-right: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
}

/* Override Judge.me product reviews max-width constraint */
.judgeme_product_reviews,
.judgeme_product_reviews .jdgm-rev-widg,
.judgeme_product_reviews .jdgm-widget,
.judgeme_product_reviews .jdgm-rev-widg__header,
.judgeme_product_reviews .jdgm-rev-widg__body {
    max-width: 100% !important;
    width: 100% !important;
}

/* Ensure all Judge.me containers take full width */
.jdgm-widget,
.jdgm-rev-widg,
.jdgm-rev-widg__header,
.jdgm-rev-widg__body,
.jdgm-rev-widg__reviews {
    max-width: 100% !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Override any page-width constraints on Judge.me blocks */
.page-width .jdgm-widget,
.page-width .jdgm-rev-widg {
    max-width: 100% !important;
    width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
}

/* ==========================================================================
   #HEADER & COLUMN STRUCTURE (JS-DRIVEN)
   ========================================================================== */

.jdgm-rev-widg__header {
    display: flex !important;
    text-align: left !important;
    flex-wrap: wrap !important;
    justify-content: flex-start !important;
    align-items: stretch !important; /* Stretch columns to be equal height */
    padding: 0 !important;
    margin-bottom: 40px !important;
    gap: 0 0 !important; /* Add column gap */
}
.jdgm-histogram__clear-filter:not([disabled]):hover, .jdgm-histogram__clear-filter:hover, .jdgm-histogram__clear-filter{
    color: #000000 !important;
}
/* 1. Title */
.jdgm-rev-widg__title {
    width: 100% !important;
    margin-bottom: 20px !important; 
    font-size: 28px !important;
    font-weight: 700 !important;
    text-align: left !important; /* Center the title */
}

/* 2. Left Column (Created by JS) */
.jdgm-custom-left-column {
    display: flex !important;
    flex-direction: column !important;
    gap: 24px !important;
    width: 391px !important;
    flex-shrink: 0;
    align-items: flex-start !important; /* Align inner content to the left */
}


/* 3. Right Column (Populated by JS) */
.jdgm-widget-actions-wrapper {
    flex-grow: 1 !important;
    min-width: 0; /* Allows the container to shrink */
    display: flex; /* Prepare for inner container */
}

/* 4. Image Carousel */
.jdgm-custom-image-carousel {
    display: flex;
    gap: 16px;
    overflow-x: auto;
    padding-bottom: 10px; /* Space for scrollbar */
    scrollbar-width: thin;
    scrollbar-color: #1C2C58 #e0e0e0;
    align-items: center; /* Vertically center images if they are shorter */
    margin-left: 40px !important;
}
.jdgm-custom-image-carousel::-webkit-scrollbar {
    height: 8px;
}
.jdgm-custom-image-carousel::-webkit-scrollbar-track {
    background: #e0e0e0;
    border-radius: 4px;
}
.jdgm-custom-image-carousel::-webkit-scrollbar-thumb {
    background-color: #1C2C58;
    border-radius: 4px;
}
/* Hide the scrollbar arrows */
.jdgm-custom-image-carousel::-webkit-scrollbar-button {
    display: none;
}
.jdgm-custom-image-carousel img,
.jdgm-custom-image-carousel video {
    width: 300px;
    height: 300px;
    object-fit: cover;
    border-radius: 8px;
    flex-shrink: 0;
    /* High-quality image rendering */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: auto;
    image-rendering: optimizeQuality;
    /* Hardware acceleration for smoother rendering */
    -webkit-backface-visibility: hidden;
    -webkit-transform: translateZ(0) scale(1);
    transform: translateZ(0) scale(1);
    backface-visibility: hidden;
    /* Better smoothing */
    -webkit-font-smoothing: subpixel-antialiased;
    -moz-osx-font-smoothing: auto;
    /* Performance hints */
    will-change: auto;
    /* Optimize rendering performance */
    contain: layout style paint;
    /* Ensure crisp rendering on high-DPI displays */
    -webkit-filter: blur(0);
    filter: blur(0);
    /* Prevent image blur during transforms */
    -webkit-perspective: 1000;
    perspective: 1000;
}

/* Force sharp rendering on retina/high-DPI displays */
@media only screen and (-webkit-min-device-pixel-ratio: 2),
       only screen and (min-resolution: 192dpi) {
    .jdgm-custom-image-carousel img {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
    }
}


/* ==========================================================================
   #LEFT COLUMN CONTENT STYLING
   ========================================================================== */
   
.jdgm-rev-widg__summary {
    display: grid !important;
    grid-template-areas: 
        "rating stars"
        "rating text" !important;
    grid-template-columns: auto 1fr !important;
    align-items: center !important;
    column-gap: 15px !important;
    row-gap: 5px !important;
}
.jdgm-rev__buyer-badge.jdgm-rev__buyer-badge {
    background-color: #1C2C58 !important;
}
.jdgm-rev__reply {
    background-color: #F0F7FF !important;
}
.jdgm-widget:not(.jdgm-review-widget--small,.jdgm-review-widget--medium) .jdgm-write-rev-link{
    border: none !important;
    border-color: transparent !important;
    max-width: none !important; /* Override the original max-width */
}
.jdgm-rev-widg__summary::before {
    grid-area: rating !important;
    content: "5.0" !important;
    font-size: 64px !important;
    font-weight: 700 !important;
    line-height: 1 !important;
    color: #1C2C58 !important;
}
.jdgm-rev-widg__summary-stars {
    grid-area: stars !important;
    align-self: end !important;
}
.jdgm-rev-widg__summary-text {
    grid-area: text !important;
    align-self: start !important;
    width: 375px !important; /* Set width as requested */
}
.jdgm-write-rev-link {
    display: block !important;
    visibility: visible !important;
    background-color: #1C2C58 !important;
    color: #ffffff !important;
    border-radius: 30px !important;
    padding: 14px 24px !important;
    font-size: 16px !important;
    font-weight: 600 !important;
    text-decoration: none !important;
    text-align: center !important;
    width: 391px !important; /* Force explicit width */
    box-sizing: border-box !important;
}

.jdgm-histogram {
    display: block !important;
    visibility: visible !important;
    width: 391px !important; /* Force explicit width */
    box-sizing: border-box !important;
}

/* Fix Histogram Layout */
.jdgm-histogram__row {
    display: flex !important;
    align-items: center !important;
}
.jdgm-histogram__star {
    width: 120px !important; /* Give stars a fixed width */
}
.jdgm-histogram__bar {
    flex-grow: 1 !important; /* Allow bar to fill remaining space */
    height: 6px !important; /* Give the bar a visible height */
    background-color: #F0F0F0 !important; /* A light grey for the track */
    border-radius: 3px !important;
    overflow: hidden; /* Ensure the content respects the border-radius */
}

/* This is the actual colored bar */
.jdgm-histogram__bar-content {
    height: 100% !important;
    background: #234085 !important;
    border-radius: 3px !important;
}

.jdgm-histogram__frequency {
    display: none !important; /* Hide the frequency number */
}


/* ==========================================================================
   #RESPONSIVE (Temporarily Disabled for Desktop Focus)
   ========================================================================== */
/*
@media (max-width: 990px) {
    .jdgm-rev-widg__header {
        flex-direction: column;
        align-items: center;
        gap: 30px 0 !important;
    }
    .jdgm-custom-left-column {
        width: 100% !important;
        align-items: center;
    }
    .jdgm-rev-widg__summary {
        justify-content: center !important;
    }
    .jdgm-widget-actions-wrapper {
        width: 100%;
    }
    .jdgm-rev-widg__title {
        text-align: center !important;
    }
}
*/

/* ==========================================================================
   #INDIVIDUAL REVIEW CARD STYLING
   ========================================================================== */

.jdgm-rev {
    display: flex !important;
    gap: 24px !important;
    align-items: flex-start !important; /* Align items to the top */
    padding: 30px 0 !important;
    border-top: 1px solid #e0e0e0;
}

/* 1. LEFT COLUMN (Image) */
.jdgm-rev__pics {
    flex-shrink: 0;
    width: 280px;
}

.jdgm-rev__pic-link,
.jdgm-rev__pic-img {
    display: block !important;
    width: 280px !important;
    height: 220px !important;
    object-fit: cover !important;
    border-radius: 8px !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    image-rendering: -webkit-optimize-contrast !important;
    image-rendering: crisp-edges !important;
    image-rendering: pixelated !important;
    -webkit-backface-visibility: hidden !important;
    -webkit-transform: translateZ(0) !important;
    transform: translateZ(0) !important;
    backface-visibility: hidden !important;
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
}

/* 2. RIGHT COLUMN (Content Wrapper created by JS) */
.jdgm-custom-right-column-content {
    flex-grow: 1;
    min-width: 0; /* Prevents flex items from overflowing */
    display: flex;
    flex-direction: column;
    gap: 8px; /* Vertical gap between rows */
}
.jdgm-widget a:not([href])[role="button"]{
    cursor: pointer !important;
    align-content: center !important;
}
/* Hide unwanted elements */
.jdgm-rev__icon,
.jdgm-rev__br {
    display: none !important;
}

/* 3. STYLING WITHIN THE RIGHT COLUMN */

/* A custom row for rating and timestamp created by JS */
.jdgm-custom-rating-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
}

/* The header now acts as a container for rating, timestamp, and author */
.jdgm-rev__header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    row-gap: 8px; /* Space between rating line and author */
}

/* Create a "row" for the rating and timestamp */
.jdgm-rev__rating {
    order: 1;
}

.jdgm-rev__timestamp {
    order: 2;
    margin-left: auto; /* Push timestamp to the far right */
    font-size: 14px;
    color: #666;
}

/* Author wrapper is now a direct child, so it's controlled by the parent's flex-direction */

/* The content (title, body) will naturally fall after the header */
.jdgm-rev__content {
    /* The content (title, body) will naturally fall after the header */
    padding: 0 !important;
}

/* Author Name Styling */
.jdgm-rev__author {
    color: #1C2C58 !important;
    font-family: "Be Vietnam Pro", sans-serif !important; /* Fallback to sans-serif */
    font-size: 20px !important;
    font-style: normal !important;
    font-weight: 600 !important;
    line-height: 150% !important; /* 30px */
}

/* ==========================================================================
   #PAGINATION STYLING (V2)
   ========================================================================== */

.jdgm-paginate {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    margin-top: 40px;
    /* Font will be inherited from .jdgm-rev-widg */
}

.jdgm-paginate a,
.jdgm-paginate span {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 40px;
    height: 40px;
    padding: 0 5px;
    box-sizing: border-box; /* Ensures consistent sizing and alignment */
    text-decoration: none !important;
    font-size: 16px;
    font-weight: 500;
    border-radius: 6px;
    color: #1C2C58 !important;
    background-color: transparent;
    transition: background-color 0.2s, color 0.2s;
}

.jdgm-paginate a:hover {
    background-color: #f0f2f5;
}

/* Current, active page - Using the correct class from user feedback */
.jdgm-paginate .jdgm-paginate__page.jdgm-curt {
    background-color: #1C2C58 !important;
    color: #ffffff !important;
    font-weight: 700;
}

/* Styling for the next/last page arrows */
.jdgm-paginate__page.jdgm-paginate__next-page,
.jdgm-paginate__page.jdgm-paginate__last-page,
.jdgm-paginate__page.jdgm-paginate__prev-page,
.jdgm-paginate__page.jdgm-paginate__first-page {
    color: #1C2C58 !important;
}
  
/* ==========================================================================
   #RESPONSIVE STYLES
   ========================================================================== */
@media (max-width: 768px) {
    .jdgm-all-reviews__summary-text--verified{
        justify-content: left !important;
    }
    .jdgm-rev-widg__summary-average{
        display: none !important;
    }
    .jdgm-rev__timestamp{
        width: 100% !important;
        margin-left: 0 !important; /* Override desktop style to ensure left alignment */
    }
    /* 1. Header & Columns */
    .jdgm-rev-widg__header {
        flex-direction: column !important;
        align-items: center !important;
        gap: 30px !important;
    }

    .jdgm-custom-left-column {
        width: 100% !important;
        align-items: flex-start !important; /* Revert to desktop's left-alignment */
        gap: 20px !important;
    }

    .jdgm-widget-actions-wrapper {
        width: 100% !important;
    }

    .jdgm-rev-widg__title {
        text-align: center !important;
        font-size: 24px !important;
    }

    /* 2. Summary & Actions - Reverted to Desktop Layout */
    .jdgm-rev-widg__summary {
        max-width: 391px; /* Ensure it doesn't overflow on small screens */
        width: 100%;
    }
    

    .jdgm-write-rev-link,
    .jdgm-histogram {
        width: 100% !important;
        max-width: 400px;
    }

    /* 3. Image Carousel */
    .jdgm-custom-image-carousel {
        margin-left: 0 !important;
        width: 100%;
    }

    /* 4. Individual Review Cards: FINAL 2-Tier Mobile Layout */
    .jdgm-widget .jdgm-rev-widg .jdgm-rev,
    .jdgm-rev-widg .jdgm-rev,
    .jdgm-rev {
        flex-direction: column !important;
        align-items: stretch !important;
        gap: 16px !important;
        display: flex !important;
        flex-wrap: nowrap !important;
    }

    /* This is the new top row (Image + Rating/Author Info) - ULTRA STRONG */
    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev-card__top-row,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev-card__top-row,
    .jdgm-rev .jdgm-rev-card__top-row {
        display: flex !important;
        flex-direction: row !important;
        align-items: flex-start !important;
        gap: 12px !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }

    /* Image column on mobile - ULTRA STRONG override */
    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev__pics,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev__pics,
    .jdgm-rev .jdgm-rev__pics {
        width: 120px !important;
        height: 120px !important;
        object-fit: cover !important;
        flex-shrink: 0 !important;
        min-width: 120px !important;
        max-width: 120px !important;
        min-height: 120px !important;
        max-height: 120px !important;
        order: -1 !important;
        display: block !important;
    }

    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev__pics .jdgm-rev__pic-link,
    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev__pics .jdgm-rev__pic-img,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev__pics .jdgm-rev__pic-link,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev__pics .jdgm-rev__pic-img,
    .jdgm-rev .jdgm-rev__pics .jdgm-rev__pic-link,
    .jdgm-rev .jdgm-rev__pics .jdgm-rev__pic-img {
        width: 120px !important;
        height: 120px !important;
        object-fit: cover !important;
        border-radius: 5px !important;
        display: block !important;
        min-width: 120px !important;
        max-width: 120px !important;
        min-height: 120px !important;
        max-height: 120px !important;
        /* Better image rendering for quality */
        image-rendering: -webkit-optimize-contrast !important;
        image-rendering: auto !important;
        -webkit-backface-visibility: hidden !important;
        -webkit-transform: translateZ(0) scale(1) !important;
        transform: translateZ(0) scale(1) !important;
        backface-visibility: hidden !important;
        -webkit-font-smoothing: subpixel-antialiased !important;
        -moz-osx-font-smoothing: auto !important;
        will-change: transform !important;
    }

    /* Right column next to image - ULTRA STRONG override */
    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-custom-right-column-content,
    .jdgm-rev-widg .jdgm-rev .jdgm-custom-right-column-content,
    .jdgm-rev .jdgm-custom-right-column-content {
        flex-grow: 1 !important;
        display: flex !important;
        flex-direction: column !important;
        gap: 8px !important;
        min-width: 0 !important;
        width: auto !important;
        max-width: none !important;
    }

    /* Rating row positioned next to image - ULTRA STRONG override */
    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-custom-rating-row,
    .jdgm-rev-widg .jdgm-rev .jdgm-custom-rating-row,
    .jdgm-rev .jdgm-custom-rating-row {
        display: flex !important;
        flex-direction: column !important;
        gap: 8px !important;
        width: 100% !important;
        align-items: flex-start !important;
        justify-content: flex-start !important;
    }

    /* Make rating and timestamp stack vertically on mobile - ULTRA STRONG override */
    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev__rating,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev__rating,
    .jdgm-rev .jdgm-rev__rating {
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        display: block !important;
    }

    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev__timestamp,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev__timestamp,
    .jdgm-rev .jdgm-rev__timestamp {
        width: 100% !important;
        margin-left: 0 !important;
        margin: 0 !important;
        font-size: 12px !important;
        color: #666 !important;
        display: block !important;
    }

    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev__author,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev__author,
    .jdgm-rev .jdgm-rev__author {
        font-size: 16px !important;
        margin: 0 !important;
        display: block !important;
    }

    /* Author wrapper - ULTRA STRONG override */
    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev__author-wrapper,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev__author-wrapper,
    .jdgm-rev .jdgm-rev__author-wrapper {
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        display: block !important;
    }

    /* Header positioning - ULTRA STRONG override */
    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev__header,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev__header,
    .jdgm-rev .jdgm-rev__header {
        display: flex !important;
        flex-direction: column !important;
        gap: 8px !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        order: 0 !important;
    }

    /* Content (title, body) sits below the top row - ULTRA STRONG override */
    .jdgm-widget .jdgm-rev-widg .jdgm-rev .jdgm-rev__content,
    .jdgm-rev-widg .jdgm-rev .jdgm-rev__content,
    .jdgm-rev .jdgm-rev__content {
        width: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
        display: block !important;
        order: 999 !important;
    }

    /* 5. Pagination */
    .jdgm-paginate a, .jdgm-paginate span {
        min-width: 32px;
        height: 32px;
        font-size: 14px;
    }
}
  