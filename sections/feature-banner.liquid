{%- render 'section_css' -%}

<style>
  /* Desktop styles (default) */
  .feature-banner-section {
    padding: 0;
    background-color: {{ section.settings.background_color | default: '#ffffff' }};
  }

  .feature-banner-container {
    position: relative;
    width: 100%;
    max-width: calc(1532px * 100vw / 1920);
    margin: 0 auto;
    aspect-ratio: 1532 / 730;
    overflow: hidden;
  }

  .feature-banner-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .feature-banner-desktop-image {
    display: block;
  }

  .feature-banner-mobile-image {
    display: none;
  }

  .feature-banner-mobile-info {
    display: none;
  }

  /* Mobile styles - 479px and below */
  @media (max-width: 479px) {
    .feature-banner-section .page-width {
      padding: 0 15px;
    }

    .feature-banner-container {
      max-width: 100%;
      width: calc(330px * 100vw / 390);
      aspect-ratio: 330 / 235;
      margin: 0 auto;
    }

    .feature-banner-desktop-image {
      display: none;
    }

    .feature-banner-mobile-image {
      display: block;
    }

    .feature-banner-mobile-info {
      display: flex;
      flex-direction: column;
      gap: clamp(8px, calc(8px * 100vw / 390), 12px);
      margin-top: clamp(16px, calc(16px * 100vw / 390), 20px);
      padding: 0 clamp(4px, calc(4px * 100vw / 390), 8px);
    }

    .feature-banner-info-title {
      font-size: clamp(16px, calc(16px * 100vw / 390), 18px);
      font-weight: 700;
      line-height: 1.3;
      color: #000000;
      margin: 0 0 16px 0;
    }

    .hotspot-mobile-list {
      display: flex;
      flex-direction: column;
      gap: 24px;
      margin-top: 32px;
      text-align: left;
    }
    .hotspot-mobile-list__item {
      display: flex;
      gap: 16px;
      align-items: flex-start;
    }
    .hotspot-mobile-list__number-wrapper {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
      border-radius: 50%;
      background-color: #1C2C58;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Be Vietnam Pro", sans-serif;
      font-size: 14px;
      font-weight: 600;
      line-height: 1;
    }
    .hotspot-mobile-list__content {
      flex: 1;
    }
    .hotspot-mobile-list__title {
      color: #000;
      font-family: "Be Vietnam Pro", sans-serif;
      font-size: 16px;
      font-style: normal;
      font-weight: 500;
      line-height: 140%;
      margin: 0 0 4px;
    }
    .hotspot-mobile-list__subtitle {
      color: #000;
      font-family: "Be Vietnam Pro", sans-serif;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: 150%;
      margin: 0;
    }
  }

  /* Tablet styles - 480px to 979px */
  @media (min-width: 480px) and (max-width: 979px) {
    .feature-banner-container {
      max-width: 100%;
      aspect-ratio: 1532 / 730;
    }
  }

  /* Desktop styles - 980px and above */
  @media (min-width: 980px) {
    .feature-banner-container {
      max-width: calc(1532px * 100vw / 1920);
      aspect-ratio: 1532 / 730;
    }
  }
</style>

<div class="feature-banner-section">
  <div class="page-width">
    <div class="feature-banner-container">
      <!-- Desktop Image -->
      <img 
        class="feature-banner-image feature-banner-desktop-image"
        {% if section.settings.desktop_image != blank %}
          src="{{ section.settings.desktop_image | image_url: width: 1532 }}" 
          alt="{{ section.settings.desktop_image.alt | escape }}"
        {% else %}
          src="https://via.placeholder.com/1532x730/3D6DFF/FFFFFF?text=Desktop+Banner" 
          alt="Desktop Banner"
        {% endif %}
        width="1532"
        height="730"
        loading="lazy"
      >
      
      <!-- Mobile Image -->
      <img 
        class="feature-banner-image feature-banner-mobile-image"
        {% if section.settings.mobile_image != blank %}
          src="{{ section.settings.mobile_image | image_url: width: 330 }}" 
          alt="{{ section.settings.mobile_image.alt | escape }}"
        {% else %}
          src="https://via.placeholder.com/330x235/3D6DFF/FFFFFF?text=Mobile+Banner" 
          alt="Mobile Banner"
        {% endif %}
        width="330"
        height="235"
        loading="lazy"
      >
    </div>

    <!-- Mobile Info Section -->
    {% if section.settings.mobile_title != blank or section.blocks.size > 0 %}
      <div class="feature-banner-mobile-info">
        {% if section.settings.mobile_title != blank %}
          <h3 class="feature-banner-info-title">
            {{ section.settings.mobile_title }}
          </h3>
        {% endif %}
        {% if section.blocks.size > 0 %}
          <div class="hotspot-mobile-list">
            {%- for block in section.blocks -%}
              {%- if block.settings.bullet_title != blank or block.settings.bullet_subtitle != blank -%}
                <div class="hotspot-mobile-list__item">
                  <div class="hotspot-mobile-list__number-wrapper">
                    <span class="hotspot-mobile-list__number">{{ forloop.index }}</span>
                  </div>
                  <div class="hotspot-mobile-list__content">
                    {%- if block.settings.bullet_title != blank -%}
                      <h3 class="hotspot-mobile-list__title">{{ block.settings.bullet_title }}</h3>
                    {%- endif -%}
                    {%- if block.settings.bullet_subtitle != blank -%}
                      <p class="hotspot-mobile-list__subtitle">{{ block.settings.bullet_subtitle }}</p>
                    {%- endif -%}
                  </div>
                </div>
              {%- endif -%}
            {%- endfor -%}
          </div>
        {% endif %}
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Feature Banner",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "image_picker",
      "id": "desktop_image",
      "label": "Desktop Banner Image",
      "info": "Recommended size: 1532x730px (ratio 1532:730 for 1920px screen)"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Banner Image",
      "info": "Recommended size: 330x235px (ratio 330:235 for 390px screen)"
    },
    {
      "type": "text",
      "id": "mobile_title",
      "label": "Mobile Title",
      "default": "Comfort Top",
      "info": "Title displayed on mobile (above bullet points)"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "bullet_point",
      "name": "Bullet Point",
      "settings": [
        {
          "type": "text",
          "id": "bullet_title",
          "label": "Title",
          "info": "Title của bullet point (không bắt buộc)"
        },
        {
          "type": "text",
          "id": "bullet_subtitle",
          "label": "Subtitle",
          "info": "Mô tả của bullet point (không bắt buộc)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Feature Banner"
    }
  ]
}
{% endschema %}

