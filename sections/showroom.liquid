
<div class="showroom-section">
<div class="page-width">


<showroom-section>
  {% include 'breadcrumbs' %}
  <div class="showroom-header">
    <details class="showroom-selector">
        <summary class="showroom-option-selected"><span class="selected-showroom">{{section.settings.title}}</span> <span class="arrow">
          <svg width="18" height="12" viewBox="0 0 18 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.1131 11.5876C8.02981 11.4898 7.95956 11.3798 7.90435 11.2607L0.351153 2.40257C0.125285 2.12986 0 1.77533 0 1.40782C0 1.04031 0.125285 0.686044 0.351153 0.413329C0.458131 0.283285 0.589189 0.17919 0.73547 0.107987C0.881751 0.0367838 1.04007 0 1.20026 0C1.36045 0 1.51877 0.0367838 1.66505 0.107987C1.81133 0.17919 1.9419 0.283285 2.04888 0.413329L5.24535 4.15882L9.00219 8.56341L14.3817 2.25336L15.9511 0.413329C16.0582 0.283437 16.1887 0.179357 16.3349 0.108253C16.4812 0.0371485 16.6396 0.000531955 16.7997 0.000531955C16.9599 0.000531955 17.1183 0.0371485 17.2645 0.108253C17.4108 0.179357 17.5418 0.283437 17.6488 0.413329C17.8747 0.686044 18 1.04031 18 1.40782C18 1.77533 17.8747 2.12986 17.6488 2.40257L10.0956 11.2607C10.0405 11.3798 9.97026 11.4899 9.8869 11.5876C9.77537 11.7215 9.63855 11.8277 9.48601 11.8988C9.33346 11.9698 9.16899 12.0043 9.00317 11.9996H8.96708C8.8063 11.9995 8.64739 11.9628 8.50034 11.8919C8.35329 11.8209 8.22135 11.7172 8.1131 11.5876Z" fill="#1B2A57"></path>
            </svg>
        </span></summary>
        <div class="showroom-options">
        </div>
    </details>
  </div>
    <div class="showroom-list">
      {%assign cities = '' -%}
        {%for block in section.blocks -%}
      {%assign cities = cities | append: block.settings.city | append: ','  -%}

        <div class="showroom-item" data-city="{{block.settings.city | handleize}}" >
            <div class="showroom-image">
                {%- assign img_url = block.settings.image | img_url: '400x' -%}
                <img
                  class="lazyload"
                  src="{{ img_url }}"
                  data-src="{{ img_url }}"
                  data-aspectratio="{{ block.settings.image.aspect_ratio }}"
                  data-widths="[360, 540, 720, 900, 1080]"
                  data-sizes="auto"
                  alt="{{ block.settings.image.alt | escape }}"
                  style="object-position: {{ background_position }};">
        
                <noscript>
                  <img class="lazyloaded"
                    src="{{ block.settings.image | img_url: '400x' }}"
                    alt="{{ block.settings.image.alt | escape }}">
                </noscript>
            </div>
            <div class="showroom-content">
                <h3 class="showroom-title">
                    {{block.settings.name}}
                </h3>
                <div class="showroom-info-section">
                    <div class="showroom-label">Địa chỉ</div>
                    <div class="showroom-address">
                        <a href="{{block.settings.address_url}}" target="_blank" title="{{block.settings.address}}">
                            {{block.settings.address}}
                        </a>
                    </div>
                </div>
                <div class="showroom-info-section">
                    <div class="showroom-label">Thời gian hoạt động</div>
                    <div class="showroom-open">
                        <span class="showroom-date">{{block.settings.date}}</span>
                        <span class="showroom-time">{{block.settings.time}}</span>
                    </div>
                </div>
                <div class="showroom-info-section">
                    <div class="showroom-label">Liên hệ</div>
                    <a class="showroom-phone" href="tel:{{block.settings.phone}}">
                        {{block.settings.phone}}
                    </a>
                </div>
            </div>
        </div>
        {%endfor%}
    </div>

</showroom-section>
{% if section.settings.show_background_image %}
  {% if section.settings.background_image %}
    <img class="showroom-bg" src="{{ section.settings.background_image | img_url: 'master' }}" loading="lazy" alt="{{ section.settings.background_image.alt | escape }}"/>
  {% else %}
    <img class="showroom-bg" src="{{'location_footer.svg' | asset_url }}" loading="lazy"  alt="location"/>
  {% endif %}
{% endif %}
</div></div>
<style>
.showroom-section{
  margin-top: 74px;
  margin-bottom: 248px;
  position: relative;
}
.showroom-bg{
  position: absolute;
  width:100%;
  left: 0;
}
.showroom-selector{
  display: inline-block;
  position: relative;
 

}
.showroom-selector svg{
  width:14px
}
.showroom-option-selected{
  font-size: 31px;
  font-weight: 600; 
  line-height: 1.2;
  display: inline-block;
  cursor: pointer;

}
.showroom-options{
  position: absolute;
  margin-top: 10px;
  width: 100%;
  background: #ffff;
  z-index: 2;
  border-radius: 4px;
  overflow: hidden;
  box-shadow: 0px 10px 20px #00000017;

}
.showroom-option {
  padding: 10px 15px;
  cursor: pointer;
}
.showroom-selector{
  margin-bottom: 90px;
}
.showroom-list {
  width: 100%;
  max-width: 100%;
  display:grid;
  grid-gap: 70px;
}
.showroom-item{
  display: grid;
  grid-template-columns:  58% 1fr ;
  grid-gap: 64px;
  align-items: flex-end;
  padding-bottom: 32px;
  position: relative;
}

.showroom-item:last-child .showroom-content::after {
  display: none;
}

/* Desktop Showroom Card Styles */
.showroom-image {
  width: 100%;
  height: auto;
  border-radius: 8px;
  overflow: hidden;
  aspect-ratio: 840 / 580;
}

.showroom-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.showroom-content {
  display: flex;
  flex-direction: column;
  gap: 0;
  justify-content: flex-end;
  position: relative;
  padding-bottom: 32px;
}

.showroom-content::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 1px;
  background-color: #000;
}

.showroom-title {
  font-size: 26px;
  font-weight: 600;
  line-height: 1.2;
  color: #1C2C58;
  margin-bottom: 32px;
  font-family: "Be Vietnam Pro", sans-serif;
}

.showroom-info-section {
  margin-bottom: 24px;
}

.showroom-info-section:last-child {
  margin-bottom: 0;
}

.showroom-label {
  font-size: 16px;
  font-weight: 600;
  line-height: 1.5;
  color: #000;
  margin-bottom: 8px;
  font-family: "Be Vietnam Pro", sans-serif;
}

.showroom-address {
  margin-bottom: 0;
}

.showroom-address a {
  color: #1C2C58;
  font-size: 16px;
  font-weight: 400;
  line-height: 1.5;
  text-decoration: none;
  font-family: "Be Vietnam Pro", sans-serif;
}

.showroom-address a:hover {
  text-decoration: underline;
}

.showroom-open {
  color: #000;
  font-size: 16px;
  font-weight: 400;
  line-height: 1.5;
  margin-bottom: 0;
  font-family: "Be Vietnam Pro", sans-serif;
}

.showroom-date,
.showroom-time {
  display: inline;
}

.showroom-phone {
  color: #000;
  font-size: 16px;
  font-weight: 400;
  line-height: 1.5;
  text-decoration: none;
  font-family: "Be Vietnam Pro", sans-serif;
}

.showroom-phone:hover {
  text-decoration: underline;
}
.showroom-option:hover{
  background-color: #5e5e5e12
}


</style>
<style>
  @media (max-width: 767px){
    .showroom-option-selected{
      font-size: 20px;
      text-align: center;
    }
    .showroom-option-selected svg{
      width: 14px
    }
    .showroom-section{
      margin-top: 56px;
      margin-bottom: 50px;
    }
    .showroom-bg{
      display: none
    }
    .showroom-item{
      grid-template-columns: 1fr;
      grid-gap: 0;
      align-items: flex-start;
      padding-bottom: 0;
      position: relative;
    }
    
    .showroom-content {
      padding-bottom: 24px;
    }
    
    .showroom-content::after {
      width: 100%;
    }
    
    .showroom-item:last-child .showroom-content::after {
      display: none;
    }
    .showroom-list{
      max-width: 100%;
      grid-gap: 32px;
      padding: 0 15px;
    }
    .showroom-selector{
      margin: 0 auto 50px;
      width: 300px;
    }
    .showroom-header{
      text-align: center;
    }
    .showroom-image {
      width: 100%;
      margin-bottom: 24px;
      border-radius: 8px;
      overflow: hidden;
    }
    .showroom-content{
      padding: 0;
      text-align: left;
    }
    .showroom-title{
      font-size: 20px;
      font-weight: 600;
      line-height: 1.2;
      color: #1C2C58;
      margin-bottom: 24px;
      text-align: left;
    }
    .showroom-info-section {
      margin-bottom: 20px;
    }
    .showroom-info-section:last-child {
      margin-bottom: 0;
    }
    .showroom-label {
      font-size: 14px;
      font-weight: 600;
      line-height: 1.5;
      color: #000;
      margin-bottom: 8px;
    }
    .showroom-address {
      margin-bottom: 0;
    }
    .showroom-address a {
      font-size: 14px;
      font-weight: 400;
      line-height: 1.5;
    }
    .showroom-open {
      font-size: 14px;
      font-weight: 400;
      line-height: 1.5;
      margin-bottom: 0;
    }
    .showroom-phone {
      font-size: 14px;
      font-weight: 400;
      line-height: 1.5;
    }
  }
</style>
{%assign cities = cities | split: ',' | uniq%}
{%capture cityArr %}
{%for city in cities %}
  {
    "name": "{{city}}",
    "value" : "{{city | handleize}}"
  } {%unless forloop.last%},{%endunless%}
{%endfor%}
{%endcapture %}
<script>

  const cityArr = [
    {{cityArr}}
  ]
  class Showroom extends HTMLElement {
    constructor() {
      super();
      this.optionsElement = this.querySelector('.showroom-options')
      this.selectedElement = this.querySelector('.selected-showroom')
      this.init();
    }
  
    init() {
      let options =  cityArr.map((city)=>{
        return `
          <div class="showroom-option" data-value="${city.value}">
            ${city.name}
          </div>
        `
      })
      this.optionsElement.innerHTML = options.join('')
      this.querySelectorAll('.showroom-option').forEach(el => {
        el.addEventListener('click', this.selectOption.bind(this))
      })
    }
  
    selectOption(e) {
      let option = e.currentTarget
      this.selectedElement.innerHTML = option.innerHTML;
      this.querySelectorAll('.showroom-item').forEach(el =>
      {
        el.classList.add('hide')
        if(el.dataset.city == option.dataset.value){
          el.classList.remove('hide')
        }

      }
      )
      this.querySelector('.showroom-selector').removeAttribute('open')

    }
  
    hide() {
    }
  }
  
  customElements.define('showroom-section', Showroom);
</script>
{% schema %}
	{
		"name": "Showroom",
		"settings": [
            {
				"type": "text",
				"id": "title",
				"label": "Title"
			},
			{
				"type": "header",
				"content": "Background Image"
			},
			{
				"type": "checkbox",
				"id": "show_background_image",
				"label": "Show background image",
				"default": false
			},
			{
				"type": "image_picker",
				"id": "background_image",
				"label": "Background image",
				"info": "Leave empty to use default location_footer.svg"
			}
		],
		"blocks": [
			{
				"type": "showroom",
				"name": "Showroom",
				"settings": [
                    {
				"type": "text",
				"id": "city",
				"label": "City"
			},
					
                    {
                      "type": "header",
                      "content": "Showroom"
                    },
                    {
                      "type": "image_picker",
                      "id": "image",
                      "label": "Showroom image"
                    },
                    {
                      "type": "text",
                      "id": "name",
                      "label": "Showroom name"
                    },
                    {
                      "type": "textarea",
                      "id": "address",
                      "label": "Showroom address"
                    },
                    {
                      "type": "text",
                      "id": "address_url",
                      "label": "Showroom address url"
                    },
                    {
                      "type": "text",
                      "id": "date",
                      "label": "Opening time"
                    },
                    {
                      "type": "text",
                      "id": "time",
                      "label": "Opening hours"
                    },
                    {
                      "type": "text",
                      "id": "phone",
                      "label": "Phone"
                    }
                    
				]
			}
		]
	}
{% endschema %}
