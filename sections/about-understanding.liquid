{%- render 'section_css' -%}

<style>
  .about-understanding-section {
    padding: 0;
    }
  /* Let theme handle canvas layout */
  .about-understanding-content {
    display: flex;
    flex-direction: column;
    gap: 5rem;
  }
  .about-understanding-item {
    display: flex;
    gap: 40px;
    align-items: center;
  }
  .about-understanding-item.reverse {
    flex-direction: row-reverse;
  }
  .about-understanding-image {
    flex: 0 0 45%;
    position: relative;
  }
  .about-understanding-image img {
    width: 100%;
    border-radius: 16px;
    box-shadow: 0 6px 18px rgba(16,38,84,.06);
  }
  .about-understanding-svg-overlay {
    position: absolute;
    bottom: 20px;
    left: -50px;
    z-index: 2;
    max-width: 300px;
    max-height: 120px;
    overflow: visible;
  }
  .about-understanding-svg-overlay svg {
    width: 100%;
    height: auto;
    display: block;
  }
  .about-understanding-text {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    text-align: left;
  }
  
  /* Item content wrapper - align to bottom */
  .about-understanding-text .item-content {
    margin-top: auto;
    width: 100%;
  }
  
  /* Section title styles when inside first item */
  .about-understanding-item:first-child .section-title {
    font-family: "Be Vietnam Pro", sans-serif;
    margin-bottom: 24px;
    text-align: left;
  }
  
  .about-understanding-item:first-child .section-title h2 {
    color: #1C2C58;
    font-size: 56px;
    font-style: normal;
    font-weight: 600;
    line-height: 80px;
    margin: 0;
    text-align: left;
  }
  
  .about-understanding-item:first-child .section-title h2 span {
    color: #759CE6;
  }
  
  .about-understanding-item:first-child .section-title .tagline {
    color: #1C2C58;
    font-family: "Be Vietnam Pro", sans-serif;
    font-size: 32px;
    font-style: normal;
    font-weight: 700;
    line-height: 50px;
    margin-top: 24px;
    margin-bottom: 0;
    text-align: left;
  }
  
  /* Item title styles - Same for all blocks */
  .about-understanding-text h3,
  .about-understanding-text .item-title {
    font-family: "Be Vietnam Pro", sans-serif;
    color: #1C2C58;
    font-size: 16px;
    font-style: normal;
    font-weight: 700;
    line-height: 140%; /* 22.4px */
    margin-bottom: 20px;
    text-align: left;
    border-bottom: 1px solid #000;
    padding-bottom: 20px;
  }
  
  /* Desktop: Item title styling for all blocks */
  @media screen and (min-width: 769px) {
    .about-understanding-text h3,
    .about-understanding-text .item-title {
      font-size: 39px;
      font-weight: 700;
      line-height: 50px; /* 128.205% */
      margin-bottom: 24px;
    }
    
    .about-understanding-item:first-child .section-title .tagline {
      font-size: 32px;
      line-height: 50px;
    }
  }
  
  .about-understanding-text p {
    color: #000;
    margin-bottom: 16px;
    line-height: 1.6;
    text-align: left;
  }
  
  /* Desktop: Paragraph styling for all blocks */
  @media screen and (min-width: 769px) {
    .about-understanding-text p {
      font-size: 20px;
      font-weight: 400;
      color: #000;
      line-height: 1.6;
      margin-bottom: 20px;
    }
    
  }
  
  .about-understanding-text p:last-child {
    margin-bottom: 0;
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .about-understanding-section .page-width {
      padding: 0 15px;
    }
    .about-understanding-content {
      gap: 40px;
    }
    .about-understanding-item {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .about-understanding-item.reverse {
      flex-direction: column;
    }
    /* First item: section-title first, then image, then item-title and content */
    /* On mobile, visually move section-title outside about-understanding-text */
    .about-understanding-item:first-child {
      position: relative;
    }
    .about-understanding-item:first-child .about-understanding-text {
      display: flex;
      flex-direction: column;
    }
    /* Move section-title visually before image on mobile */
    .about-understanding-item:first-child .section-title {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      margin-bottom: 20px;
      z-index: 1;
    }
    .about-understanding-item:first-child .about-understanding-image {
      margin-top: calc(20px + 28px + 30px + 32px + 20px); /* title height + tagline + margins */
      flex: none;
    }
    .about-understanding-item:first-child .item-title {
      order: 1;
    }
    .about-understanding-item:first-child .item-content {
      order: 2;
    }
    /* Other items: image first, then title and content */
    .about-understanding-item:not(:first-child) .about-understanding-image {
      order: 1;
      flex: none;
    }
    .about-understanding-item:not(:first-child) .about-understanding-text {
      order: 2;
    }
    .about-understanding-text {
      display: flex;
      flex-direction: column;
      width: 100%;
    }
    .about-understanding-image {
      flex: none;
    }
    .about-understanding-svg-overlay {
      position: absolute;
      top: 20px;
      right: 20px;
      bottom: auto;
      left: auto;
      max-width: 150px;
      max-height: 80px;
    }
  }

  /* Desktop layout adjustments (min-width: 769px) */
  @media screen and (min-width: 769px) {
    .about-understanding-content {
      gap: 6rem;
    }
    
    .about-understanding-item {
      gap: 60px;
      align-items: flex-start;
    }
    
    .about-understanding-image {
      flex: 0 0 50%;
    }
    
    .about-understanding-text {
      flex: 0 0 calc(50% - 60px);
      padding-top: 0;
      display: flex;
      flex-direction: column;
    }
    
    /* Section title is now inside about-understanding-text, at the top */
    .about-understanding-item:first-child .about-understanding-text .section-title {
      order: 1;
      margin-bottom: 24px;
    }
    
    /* Item title comes after section title */
    .about-understanding-item:first-child .about-understanding-text .item-title {
      order: 2;
    }
    
    /* Content comes last */
    .about-understanding-item:first-child .about-understanding-text .item-content {
      order: 3;
    }
    
    /* SVG overlay positioning for desktop */
    .about-understanding-svg-overlay {
      bottom: 20px;
      left: 20px;
      max-width: 280px;
      max-height: 100px;
    }
  }
  
  /* Mobile: Section title styles when inside first item */
  @media (max-width: 768px) {
    .about-understanding-item:first-child .section-title {
      margin-bottom: 20px;
    }
    .about-understanding-item:first-child .section-title h2 {
      font-size: 20px !important;
      line-height: 28px;
      display: inline-block;
      width: 100%;
    }
    
    .about-understanding-item:first-child .section-title h2 br {
      display: none;
    }
    
    .about-understanding-item:first-child .section-title h2 span {
      color: #759CE6;
      display: inline;
    }
    
    .about-understanding-item:first-child .section-title .tagline {
      margin-top: 30px;
      font-size: 16px;
      line-height: 32px;
    }
  }

</style>

<div class="about-understanding-section">
  <div class="page-width">    
    <div class="about-understanding-content">
      {% for block in section.blocks %}
        <div class="about-understanding-item{% if block.settings.reverse_layout %} reverse{% endif %}">
          <div class="about-understanding-image">
            {% if block.settings.image != blank %}
              <img 
                src="{{ block.settings.image | image_url: width: 500 }}" 
                alt="{{ block.settings.image.alt | escape }}"
                width="{{ block.settings.image.width }}"
                height="{{ block.settings.image.height }}"
                loading="lazy"
              >
            {% else %}
              <img src="https://via.placeholder.com/500x400/3D6DFF/FFFFFF?text=Understanding+{{ forloop.index }}" alt="Understanding {{ forloop.index }}" width="500" height="400" />
            {% endif %}
            {% if block.settings.svg_overlay != blank %}
              <div class="about-understanding-svg-overlay">
                {{ block.settings.svg_overlay }}
              </div>
            {% endif %}
          </div>
          <div class="about-understanding-text">
            {%- comment -%} Desktop: Section title inside text wrapper. Mobile: Will be moved outside via CSS {%- endcomment -%}
            {%- if forloop.first -%}
              {%- if section.settings.title != blank or section.settings.subtitle != blank -%}
                <div class="section-title">
                  {%- if section.settings.title != blank -%}
                    <h2>
                      {{ section.settings.title }}{% if section.settings.title_colored != blank %} <span>{{ section.settings.title_colored }}</span>{% endif %}
                    </h2>
                  {%- endif -%}
                  {%- if section.settings.subtitle != blank -%}
                    <p class="tagline">{{ section.settings.subtitle }}</p>
                  {%- endif -%}
                </div>
              {%- endif -%}
            {%- endif -%}
            
            {%- if block.settings.title != blank -%}
              <h3 class="item-title">{{ block.settings.title }}</h3>
            {%- endif -%}
            
            <div class="item-content">
              {{ block.settings.content }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "About Understanding",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Ru9 sẽ không ngừng",
      "info": "Main title text"
    },
    {
      "type": "text",
      "id": "title_colored",
      "label": "Section Title (Colored Part)",
      "default": "lắng nghe và thấu hiểu",
      "info": "This part will be displayed in blue color"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Section Subtitle",
      "default": "Hiểu rằng mỗi giấc ngủ là một trải nghiệm cá nhân"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#F5F5F5"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#1A2230"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#5E6B85"
    }
  ],
  "blocks": [
    {
      "type": "about_understanding_item",
      "name": "Understanding Item",
      "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Item Title",
      "default": "Hiểu rằng mỗi giấc ngủ là một trải nghiệm cá nhân"
    },
        {
          "type": "richtext",
          "id": "content",
          "label": "Item Content",
          "default": "<p>Giấc ngủ không đơn giản là khoảng thời gian khép mắt, mà là trải nghiệm cá nhân gắn liền với sức khỏe, cảm xúc và chất lượng sống của mỗi người. Thế nhưng, thực tế tại Việt Nam cho thấy hiệu suất giấc ngủ chưa được quan tâm đúng cách.</p><p>Theo thống kê, có đến gần 1/3 người trưởng thành thường xuyên mất ngủ hoặc khó ngủ. Tình trạng này không chỉ khiến cơ thể mệt mỏi, giảm hiệu suất công việc, mà còn ảnh hưởng trực tiếp đến sự gắn kết gia đình, đời sống tinh thần và vấn đề sức khỏe khác.</p>"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Item Image"
        },
        {
          "type": "html",
          "id": "svg_overlay",
          "label": "SVG Overlay Code"
        },
        {
          "type": "checkbox",
          "id": "reverse_layout",
          "label": "Reverse Layout",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "About Understanding",
      "blocks": [
        {
          "type": "about_understanding_item",
          "settings": {
            "title": "Hiểu rằng mỗi giấc ngủ là một trải nghiệm cá nhân",
            "content": "<p>Giấc ngủ không đơn giản là khoảng thời gian khép mắt, mà là trải nghiệm cá nhân gắn liền với sức khỏe, cảm xúc và chất lượng sống của mỗi người. Thế nhưng, thực tế tại Việt Nam cho thấy hiệu suất giấc ngủ chưa được quan tâm đúng cách.</p><p>Theo thống kê, có đến gần 1/3 người trưởng thành thường xuyên mất ngủ hoặc khó ngủ. Tình trạng này không chỉ khiến cơ thể mệt mỏi, giảm hiệu suất công việc, mà còn ảnh hưởng trực tiếp đến sự gắn kết gia đình, đời sống tinh thần và vấn đề sức khỏe khác.</p>"
          }
        },
        {
          "type": "about_understanding_item",
          "settings": {
            "title": "Giải pháp cho giấc ngủ, đầu tư cho cuộc sống",
            "content": "<p>Không chỉ dừng lại ở lời nhắc \"ngủ đủ 8 tiếng\", Ru9 đem đến giải pháp thực tiễn bằng những sản phẩm gần gũi, gắn liền với nhu cầu hàng ngày.</p><p>Là nơi mà công nghệ hiện đại gặp gỡ thói quen truyền thống để từng bước thay đổi quan niệm cũ rằng giấc ngủ chỉ cần \"tạm đủ\" là được.</p><p>Mở ra một góc nhìn mới cho người Việt về một giấc ngủ - không chỉ là sự thoải mái tức thời, mà còn là nền tảng để nâng cao sức khỏe và chất lượng sống cho tất cả mọi người.</p>",
            "reverse_layout": true
          }
        }
      ]
    }
  ]
}
{% endschema %}
