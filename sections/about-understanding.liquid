{%- render 'section_css' -%}

<style>
  .about-understanding-section {
    padding: 0;
    }
  /* Let theme handle canvas layout */
  .about-understanding-content {
    display: flex;
    flex-direction: column;
    gap: 5rem;
  }
  .about-understanding-item {
    display: flex;
    gap: 40px;
    align-items: center;
  }
  .about-understanding-item.reverse {
    flex-direction: row-reverse;
  }
  .about-understanding-image {
    flex: 0 0 45%;
    position: relative;
  }
  .about-understanding-image img {
    width: 100%;
    border-radius: 16px;
    box-shadow: 0 6px 18px rgba(16,38,84,.06);
  }
  .about-understanding-svg-overlay {
    position: absolute;
    bottom: 20px;
    left: -50px;
    z-index: 2;
    max-width: 300px;
    max-height: 120px;
    overflow: visible;
  }
  .about-understanding-svg-overlay svg {
    width: 100%;
    height: auto;
    display: block;
  }
  .about-understanding-text {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  .about-understanding-text h3 {
    font-size: 24px;
    font-weight: 700;
    color: {{ section.settings.title_color | default: '#1A2230' }};
    margin-bottom: 20px;
    line-height: 1.2;
  }
  .about-understanding-text p {
    color: {{ section.settings.text_color | default: '#5E6B85' }};
    margin-bottom: 16px;
    line-height: 1.6;
  }
  .about-understanding-text p:last-child {
    margin-bottom: 0;
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .about-understanding-section .page-width {
      padding: 0 15px;
    }
    .about-understanding-content {
      gap: 40px;
    }
    .about-understanding-item {
      flex-direction: column;
      gap: 20px;
    }
    .about-understanding-item.reverse {
      flex-direction: column;
    }
    .about-understanding-text {
      order: 1;
    }
    .about-understanding-image {
      order: 2;
      flex: none;
    }
    .about-understanding-svg-overlay {
      position: absolute;
      top: 20px;
      right: 20px;
      bottom: auto;
      left: auto;
      max-width: 150px;
      max-height: 80px;
    }
  }

  /* Ru9 Section Title Styles */
  .ru9-section {
    font-family: "Be Vietnam Pro", sans-serif;
    padding-bottom: 60px;
    width: 100%;
    max-width: 1594px;
    margin: -90px auto 0 auto;
    padding-left: 5rem;
    padding-right: 5rem;
  }

  /* Responsive padding cho các kích thước màn hình */
  @media (max-width: 1399px) and (min-width: 1024px) {
    .ru9-section {
      padding-left: 5rem;
      padding-right: 5rem;
    }
  }

  @media (max-width: 1023px) and (min-width: 769px) {
    .ru9-section {
      padding-left: clamp(20px, 4vw, 40px);
      padding-right: clamp(30px, 5vw, 5rem);
    }
  }

  .ru9-section h2 {
    color: #1C2C58;
    font-size: 64px;
    font-style: normal;
    font-weight: 600;
    line-height: 80px;
    margin: 0;
  }

  .ru9-section h2 span {
    color: #759CE6;
  }

  .ru9-section p {
    color: #1C2C58;
    font-size: 35px;
    font-style: normal;
    font-weight: 700;
    line-height: 50px;
    margin-top: 85px;
  }

  /* Responsive: cho mobile nhỏ hơn 768px */
  @media (max-width: 768px) {
    .ru9-section {
      border-bottom: 3px solid #759CE6;
      padding-bottom: 24px;
      padding: 60px 15px 0 15px;
      max-width: 100%;
    }

    .ru9-section h2 {
      font-size: 20px !important;
      line-height: 28px;
      display: inline-block;
      width: 100%;
    }

    /* Ẩn thẻ <br> trên mobile để các span có thể ở cùng 1 hàng */
    .ru9-section h2 br {
      display: none;
    }

    /* Đảm bảo các span hiển thị như text thông thường, có thể wrap tự nhiên */
    .ru9-section h2 span {
      color: #759CE6;
      display: inline;
    }

    .ru9-section p {
      margin-top: 30px;
      font-size: 16px;
      line-height: 32px;
    }
  }

</style>

<div class="about-understanding-section">
  {%- if section.settings.title != blank or section.settings.subtitle != blank -%}
    <section class="ru9-section">
      {%- if section.settings.title != blank -%}
        <h2>
          {{ section.settings.title }}
        </h2>
      {%- endif -%}
      {%- if section.settings.subtitle != blank -%}
        <p>
          {{ section.settings.subtitle }}
        </p>
      {%- endif -%}
    </section>
  {%- endif -%}
  <div class="page-width">    
    <div class="about-understanding-content">
      {% for block in section.blocks %}
        <div class="about-understanding-item{% if block.settings.reverse_layout %} reverse{% endif %}">
          <div class="about-understanding-image">
            {% if block.settings.image != blank %}
              <img 
                src="{{ block.settings.image | image_url: width: 500 }}" 
                alt="{{ block.settings.image.alt | escape }}"
                width="{{ block.settings.image.width }}"
                height="{{ block.settings.image.height }}"
                loading="lazy"
              >
            {% else %}
              <img src="https://via.placeholder.com/500x400/3D6DFF/FFFFFF?text=Understanding+{{ forloop.index }}" alt="Understanding {{ forloop.index }}" width="500" height="400" />
            {% endif %}
            {% if block.settings.svg_overlay != blank %}
              <div class="about-understanding-svg-overlay">
                {{ block.settings.svg_overlay }}
              </div>
            {% endif %}
          </div>
          <div class="about-understanding-text">
            <div>{{ block.settings.title }}</div>
            {{ block.settings.content }}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "About Understanding",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "html",
      "id": "title",
      "label": "Section Title",
      "default": "Ru9 sẽ không ngừng <br><span>lắng nghe và thấu hiểu</span>",
      "info": "Use <span> tags for colored text, <br> for line breaks"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Section Subtitle",
      "default": "Hiểu rằng mỗi giấc ngủ là một trải nghiệm cá nhân"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#F5F5F5"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#1A2230"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#5E6B85"
    }
  ],
  "blocks": [
    {
      "type": "about_understanding_item",
      "name": "Understanding Item",
      "settings": [
        {
          "type": "html",
          "id": "title",
          "label": "Item Title",
          "default": "Hiểu rằng mỗi giấc ngủ là một trải nghiệm cá nhân"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Item Content",
          "default": "<p>Giấc ngủ không đơn giản là khoảng thời gian khép mắt, mà là trải nghiệm cá nhân gắn liền với sức khỏe, cảm xúc và chất lượng sống của mỗi người. Thế nhưng, thực tế tại Việt Nam cho thấy hiệu suất giấc ngủ chưa được quan tâm đúng cách.</p><p>Theo thống kê, có đến gần 1/3 người trưởng thành thường xuyên mất ngủ hoặc khó ngủ. Tình trạng này không chỉ khiến cơ thể mệt mỏi, giảm hiệu suất công việc, mà còn ảnh hưởng trực tiếp đến sự gắn kết gia đình, đời sống tinh thần và vấn đề sức khỏe khác.</p>"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Item Image"
        },
        {
          "type": "html",
          "id": "svg_overlay",
          "label": "SVG Overlay Code"
        },
        {
          "type": "checkbox",
          "id": "reverse_layout",
          "label": "Reverse Layout",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "About Understanding",
      "blocks": [
        {
          "type": "about_understanding_item",
          "settings": {
            "title": "Hiểu rằng mỗi giấc ngủ là một trải nghiệm cá nhân",
            "content": "<p>Giấc ngủ không đơn giản là khoảng thời gian khép mắt, mà là trải nghiệm cá nhân gắn liền với sức khỏe, cảm xúc và chất lượng sống của mỗi người. Thế nhưng, thực tế tại Việt Nam cho thấy hiệu suất giấc ngủ chưa được quan tâm đúng cách.</p><p>Theo thống kê, có đến gần 1/3 người trưởng thành thường xuyên mất ngủ hoặc khó ngủ. Tình trạng này không chỉ khiến cơ thể mệt mỏi, giảm hiệu suất công việc, mà còn ảnh hưởng trực tiếp đến sự gắn kết gia đình, đời sống tinh thần và vấn đề sức khỏe khác.</p>"
          }
        },
        {
          "type": "about_understanding_item",
          "settings": {
            "title": "Giải pháp cho giấc ngủ, đầu tư cho cuộc sống",
            "content": "<p>Không chỉ dừng lại ở lời nhắc \"ngủ đủ 8 tiếng\", Ru9 đem đến giải pháp thực tiễn bằng những sản phẩm gần gũi, gắn liền với nhu cầu hàng ngày.</p><p>Là nơi mà công nghệ hiện đại gặp gỡ thói quen truyền thống để từng bước thay đổi quan niệm cũ rằng giấc ngủ chỉ cần \"tạm đủ\" là được.</p><p>Mở ra một góc nhìn mới cho người Việt về một giấc ngủ - không chỉ là sự thoải mái tức thời, mà còn là nền tảng để nâng cao sức khỏe và chất lượng sống cho tất cả mọi người.</p>",
            "reverse_layout": true
          }
        }
      ]
    }
  ]
}
{% endschema %}
